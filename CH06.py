# Team Study CH06
'''
### CH06 (데이터 시각화)
**No.19 산점도 (`scatterplot`):** 나이가 많을수록 혈압도 높을까? (상관관계 확인)
**No.20 히스토그램 (`histplot`):** 우리 병원 환자들은 주로 몇 살일까? (분포 확인)
**No.21 박스플롯 (`boxplot`):** 남성과 여성의 당뇨 수치 차이 비교하기.
**No.22 "데이터 보고서 그리기"**
  - Kaggle의 타이타닉(Titanic) 혹은 당뇨병 데이터를 받아, **"나이에 따른 생존율"** 혹은 **"당뇨병 유무에 따른 혈당 차이"**를 그래프 하나로 그려서 캡처해 공유하세요.
'''

import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# 한글 폰트 설정 (시스템에 따라 조정 가능)
plt.rcParams['font.family'] = ['AppleGothic', 'Malgun Gothic', 'NanumGothic', 'sans-serif']
plt.rcParams['axes.unicode_minus'] = False

# 더미 데이터 (No.19 ~ No.21용) — 차트 확인용으로 데이터 확대
data = {
    '이름': [
        '김철수', '이영희', '박민수', '최지영', '정수진', '한대호', '윤미라', '강동욱', '임소연', '조현우',
        '오세훈', '배수진', '신동엽', '권나영', '황민준', '송하늘', '전유리', '류승호', '문지은', '홍길동',
        '김민지', '이준혁', '박서연', '최민수', '정유나', '한지우', '윤서준', '강예진', '임도현', '조은별',
        '오지훈', '배수아', '신예린', '권태희', '황지훈', '송민재', '전소희', '류지원', '문현우', '홍서윤',
        '김도윤', '이수빈', '박준서', '최예나', '정시우', '한서현', '윤지호', '강민서', '임유진', '조현서',
    ],
    '나이': [
        35, 32, 28, 45, 38, 65, 72, 58, 42, 68,
        24, 51, 36, 29, 44, 56, 63, 41, 33, 70,
        27, 39, 47, 52, 31, 59, 66, 25, 48, 55,
        37, 43, 62, 34, 49, 26, 61, 54, 40, 69,
        30, 46, 53, 57, 22, 64, 71, 23, 50, 60,
    ],
    '성별': [
        '남', '여', '남', '여', '여', '남', '여', '남', '여', '남',
        '남', '여', '남', '여', '남', '여', '여', '남', '여', '남',
        '여', '남', '여', '남', '여', '남', '남', '여', '남', '여',
        '남', '여', '여', '남', '남', '남', '여', '여', '남', '여',
        '남', '여', '남', '여', '남', '여', '남', '여', '남', '여',
    ],
    '혈압': [
        125, 135, 110, 142, 128, 150, 138, 145, 120, 160,
        118, 148, 122, 132, 140, 155, 144, 126, 115, 162,
        108, 136, 152, 141, 130, 158, 146, 112, 134, 149,
        124, 138, 154, 119, 143, 105, 156, 131, 137, 164,
        127, 133, 147, 151, 116, 153, 159, 111, 139, 161,
    ],
    '혈당': [
        95, 105, 88, 155, 98, 165, 180, 142, 110, 195,
        92, 168, 102, 118, 152, 172, 188, 96, 125, 198,
        85, 138, 162, 178, 108, 175, 192, 90, 148, 185,
        100, 132, 182, 94, 158, 82, 190, 115, 128, 200,
        104, 145, 170, 165, 86, 184, 196, 91, 155, 178,
    ],
    '진단명': [
        '정상', '고혈압', '정상', '당뇨', '정상', '고혈압+당뇨', '당뇨', '고혈압', '정상', '고혈압+당뇨',
        '정상', '당뇨', '정상', '고혈압', '당뇨', '고혈압+당뇨', '당뇨', '정상', '정상', '고혈압+당뇨',
        '정상', '고혈압', '당뇨', '고혈압', '당뇨', '고혈압+당뇨', '당뇨', '정상', '고혈압', '당뇨',
        '정상', '고혈압', '당뇨', '정상', '고혈압', '정상', '당뇨', '정상', '고혈압', '고혈압+당뇨',
        '정상', '당뇨', '고혈압+당뇨', '당뇨', '정상', '당뇨', '고혈압+당뇨', '정상', '당뇨', '고혈압+당뇨',
    ],
}

df = pd.DataFrame(data)


# ========== No.19 산점도 (scatterplot): 나이 vs 혈압 — 상관관계 확인 ==========
# 여기에 작성
sns.scatterplot(data=df, x='혈압', y='나이', hue='성별', sizes=(50, 300), size='혈당')
plt.show()

# ========== No.20 히스토그램 (histplot): 우리 병원 환자 나이 분포 ==========
# 여기에 작성
sns.histplot(data=df, x='나이', hue='성별', multiple='dodge')
plt.show()

# ========== No.21 박스플롯 (boxplot): 남성 vs 여성 당뇨(혈당) 수치 비교 ==========
# 여기에 작성

sns.boxplot(data=df, x='성별', y='혈당', hue='진단명')
plt.show()

# ========== No.22 데이터 보고서 그리기 ==========
# Kaggle에서 타이타닉 또는 당뇨병 데이터를 받아,
# "나이에 따른 생존율" 또는 "당뇨병 유무에 따른 혈당 차이" 중 하나를 그래프로 그린 뒤 캡처해 공유하세요.
# (데이터 로드 및 시각화 코드를 이 아래에 작성)

diabetes = pd.read_csv('./data/diabetes.csv') # keggle 데이터중 당뇨관련 데이터 로드

diabetes['AgeGroup'] = pd.cut(diabetes['Age'], bins=[0, 30, 40, 50, 60, 100], labels=['~30', '31-40', '41-50', '51-60', '60+']) # pandas 의 cut 함수를 이용하여 나이 구간 만들기
sns.boxplot(data=diabetes, x='AgeGroup', y='Glucose', hue='Outcome')
leg = plt.legend() # 범례 텍스트를 가지고 와서
leg.get_texts()[0].set_text('정상') # 0번째의 텍스트 수정
leg.get_texts()[1].set_text('당뇨') # 1번째의 텍스트 수정
plt.show()